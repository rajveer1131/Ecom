{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Api } from '../Api';\nimport { logout } from '../localstorage';\nfunction useLogin() {\n  _s();\n  const [loginInfo, setLoginInfo] = useState({\n    loading: true,\n    isLogin: false\n  });\n  const {\n    replace\n  } = useHistory();\n  const checkLogin = useCallback(async () => {\n    const {\n      statusCode,\n      data\n    } = await Api.getRequest(`/api/user/me`);\n    // console.log({statusCode, data})\n    if (statusCode === 400 || statusCode === 500) {\n      replace('/');\n      logout();\n      return;\n    }\n    setLoginInfo({\n      loading: false,\n      isLogin: true\n    });\n  }, [replace]);\n  useEffect(() => {\n    checkLogin();\n  }, [checkLogin]);\n  return {\n    loginInfo\n  };\n}\n_s(useLogin, \"lh24ktGNKyOxRsLx+8eJOny/ldQ=\", false, function () {\n  return [useHistory];\n});\nexport default useLogin;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useSelector","useHistory","Api","logout","useLogin","_s","loginInfo","setLoginInfo","loading","isLogin","replace","checkLogin","statusCode","data","getRequest"],"sources":["/home/r-linux/e-commerce-store-master/e-comerce-frontend/src/utils/hooks/useLogin.js"],"sourcesContent":["import React, {useCallback, useEffect, useState} from 'react'\nimport {useSelector} from 'react-redux'\nimport {useHistory} from 'react-router'\nimport {Api} from '../Api'\nimport {logout} from '../localstorage'\n\nfunction useLogin() {\n  const [loginInfo, setLoginInfo] = useState({\n    loading: true,\n    isLogin: false,\n  })\n  const {replace} = useHistory()\n  const checkLogin = useCallback(async () => {\n    const {statusCode, data} = await Api.getRequest(`/api/user/me`)\n    // console.log({statusCode, data})\n    if (statusCode === 400 || statusCode === 500) {\n      replace('/')\n      logout()\n      return\n    }\n    setLoginInfo({loading: false, isLogin: true})\n  }, [replace])\n  useEffect(() => {\n    checkLogin()\n  }, [checkLogin])\n  return {loginInfo}\n}\n\nexport default useLogin\n"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAC7D,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,UAAU,QAAO,cAAc;AACvC,SAAQC,GAAG,QAAO,QAAQ;AAC1B,SAAQC,MAAM,QAAO,iBAAiB;AAEtC,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC;IACzCS,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE;EACX,CAAC,CAAC;EACF,MAAM;IAACC;EAAO,CAAC,GAAGT,UAAU,CAAC,CAAC;EAC9B,MAAMU,UAAU,GAAGd,WAAW,CAAC,YAAY;IACzC,MAAM;MAACe,UAAU;MAAEC;IAAI,CAAC,GAAG,MAAMX,GAAG,CAACY,UAAU,CAAC,cAAc,CAAC;IAC/D;IACA,IAAIF,UAAU,KAAK,GAAG,IAAIA,UAAU,KAAK,GAAG,EAAE;MAC5CF,OAAO,CAAC,GAAG,CAAC;MACZP,MAAM,CAAC,CAAC;MACR;IACF;IACAI,YAAY,CAAC;MAACC,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE;IAAI,CAAC,CAAC;EAC/C,CAAC,EAAE,CAACC,OAAO,CAAC,CAAC;EACbZ,SAAS,CAAC,MAAM;IACda,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAChB,OAAO;IAACL;EAAS,CAAC;AACpB;AAACD,EAAA,CApBQD,QAAQ;EAAA,QAKGH,UAAU;AAAA;AAiB9B,eAAeG,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}